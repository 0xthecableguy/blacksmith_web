import{b as A,h as b,l as I,E as R,O as k,P as O,k as U,s as h,Q as T,a as g,R as y,U as D,c as F,S as L,T as Y,C as q,V as x,W as C,X as M,Y as P,n as E,Z,F as w,_ as B}from"./DPTQxRoV.js";import{s as H,g as Q}from"./CVoirLfX.js";function X(s,a,f=!1){b&&I();var e=s,i=null,r=null,t=D,v=f?R:0,c=!1;const S=(l,n=!0)=>{c=!0,o(n,l)},o=(l,n)=>{if(t===(t=l))return;let d=!1;if(b){const N=e.data===k;!!t===N&&(e=O(),U(e),h(!1),d=!0)}t?(i?T(i):n&&(i=g(()=>n(e))),r&&y(r,()=>{r=null})):(r?T(r):n&&(r=g(()=>n(e))),i&&y(i,()=>{i=null})),d&&h(!0)};A(()=>{c=!1,a(S),c||o(null,null)},v),b&&(e=F)}function p(s,a){return s===a||(s==null?void 0:s[C])===a}function $(s={},a,f,e){return L(()=>{var i,r;return Y(()=>{i=r,r=[],q(()=>{s!==f(...r)&&(a(s,...r),i&&p(f(...i),s)&&a(null,...i))})}),()=>{x(()=>{r&&p(f(...r),s)&&a(null,...r)})}}),s}let u=!1,_=Symbol();function j(s,a,f){const e=f[a]??(f[a]={store:null,source:Z(void 0),unsubscribe:E});if(e.store!==s&&!(_ in f))if(e.unsubscribe(),e.store=s??null,s==null)e.source.v=void 0,e.unsubscribe=E;else{var i=!0;e.unsubscribe=H(s,r=>{i?e.source.v=r:B(e.source,r)}),i=!1}return s&&_ in f?Q(s):w(e.source)}function z(){const s={};function a(){M(()=>{for(var f in s)s[f].unsubscribe();P(s,_,{enumerable:!1,value:!0})})}return[s,a]}function G(s){var a=u;try{return u=!1,[s(),u]}finally{u=a}}export{j as a,$ as b,G as c,X as i,z as s};
